<div class="row" ng-controller="GrmCtrl">

    <div class="col-md-12">
        <md-content layout="column" flex class="custom__md-content__categ">



            <md-card>


                <md-toolbar class="md-table-toolbar md-default">


                    <div class="md-toolbar-tools">


                        <h3>Механизм рассмотрения жалоб и отзывов</h3>


                    </div>

                    <div class="md-toolbar-tools">


                        <input type="text" ng-model="search" placeholder="Поиск..." class="custom__search__input">


                    </div>

                    <div class="md-toolbar-tools">


                        <button class="btn btn-primary" ng-click="addBtn()">Добавить запись</button>
                        <button class="btn btn-primary" ng-click="excel()">Выгрузить в Excel</button>


                    </div>


                </md-toolbar>


                <!-- exact table from live demo -->
                <md-table-container class="custom__fix__freez__head">
                    <table md-table ng-model="ctrl.selected">
                        <thead md-head fix-head>
                        <tr md-row>

                            <th md-column>Номер <br> отслеживания</th>
                            <th md-column>Дата получения</th>
                            <th md-column>Канал получения <br> жалобы</th>
                            <th md-column>Страна</th>
                            <th md-column>Заявитель</th>




                            <th md-column>Категория жалобы</th>


                            <th md-column>Возникшие вопросы</th>
                            <th md-column>Ответственный за <br> рассмотрение жалобы</th>
                            <th md-column>Статус жалобы</th>
                            <th md-column>Принятые меры</th>
                            <th md-column>Крайний срок <br> для ответа заявителю</th>
                            <th md-column>Дата уведомления <br> заявителя</th>
                            <th md-column>Время затраченное <br> на рассмотрение жалобы</th>


                            <th md-column>Сохранить</th>
                            <th md-column>Удалить</th>

                        </tr>
                        </thead>
                        <tbody md-body>





                        <tr md-row md-select="data" md-select-id="id" md-auto-select ng-repeat="data in data | filter:search">





                            <td md-cell ng-style="{'background-color': data.colorForStatus}">{{data.id}}</td>


                            <td md-cell>


                                <input type="date" value="{{data.dateInGo}}" ng-model="data.dateInGo">
                              </td>

                            <td md-cell>

                                <select ng-model="data.canalRequest" ng-options="x._id as x.name for x in data.allCanalRequestStatus">
                                </select>

                            </td>



                            <td md-cell>

                                <select ng-model="data.country" ng-options="y._id as y.name for y in data.allCountrys">
                                </select>

                            </td>




                            <td md-cell><input type="text" value="{{data.declarerFIO}}" ng-model="data.declarerFIO"></td>


                            <td md-cell>

                                <select ng-model="data.categComplaint" ng-options="x._id as x.name for x in data.allCategComplaint" style="max-width: 200px;">
                                </select>

                            </td>



                            <td md-cell><input type="text" value="{{data.raisedQuestion}}" ng-model="data.raisedQuestion"></td>




                            <td md-cell><input type="text" value="{{data.responsibleConsideration}}" ng-model="data.responsibleConsideration"></td>


                            <td md-cell>

                                <select ng-model="data.statusId" ng-options="x._id as x.name for x in data.allStatus">
                                </select>

                            </td>


                            <td md-cell><input type="text" value="{{data.takeAction}}" ng-model="data.takeAction"></td>



                            <td md-cell><input type="date" value="{{data.lastDateAnswer}}" ng-model="data.lastDateAnswer" min="{{data.dateInGo | date:'yyyy-MM-dd'}}" ng-change="changeLastDateAnswer(data)"></td>




                            <td md-cell><input type="date" value="{{data.dateNotifDeclarer}}" ng-model="data.dateNotifDeclarer" min="{{data.dateInGo | date:'yyyy-MM-dd'}}"></td>


                            <td md-cell><input type="text" value="{{data.timeToCheckComplaint}}" ng-model="data.timeToCheckComplaint"></td>





                            <td md-cell><i class="material-icons" ng-click="saveBtn(data)">done_all</i></td>

                            <td md-cell><i class="material-icons" ng-click="delete(data._id, $index)">delete</i></td>



                        </tr>
                        </tbody>
                    </table>
                </md-table-container>








            </md-card>













</md-content>
    </div>

</div>